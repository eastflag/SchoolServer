<div ng-controller='StatisticCtrl'>
	<div class="row">
        <div class="col-lg-12">
            <h3 class="page-header">통계</h3>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
			<div class="panel panel-info">
				<div class="panel-heading">
					<i class="fa fa-list fa-lg"></i> 평균 및 분포
				</div>
				
<!--  				<ul ng-repeat="gugun in gugunList">
					<li>{{gugun.gugun}}</li>
				</ul>  -->
				
				
				<table class="table table-striped">
			    	<thead>
			    		<tr>
			    			<td>
				    			<label>지역 </label>
			    			</td>
			    			<td>
			    				<select id="sido" ng-model="select_sido" ng-change="resetAddr();getGugun()">
			    					<option value=""  >--시 선택--</option>
			    					<option value="all" >전국</option>
			    					<option value="서울" >서울</option>
			    					<option value="부산">부산</option>
			    					<option value="대구">대구</option>
			    					<option value="인천">인천</option>
			    					<option value="광주">광주</option>
			    					<option value="대전">대전</option>
			    					<option value="울산">울산</option>
			    					<option value="경기">경기</option>
			    					<option value="강원">강원</option>
			    					<option value="전남">전남</option>
			    					<option value="전북">전북</option>
			    					<option value="충남">충남</option>
			    					<option value="충북">충북</option>
			    					<option value="경남">경남</option>
			    					<option value="경북">경북</option>
			    					<option value="세종">세종</option>
			    					<option value="제주">제주</option>
			    				</select>
			    			</td>

 			    			<td>
							    <select ng-model="select_gugun" ng-change="getSchoolByAddr()">
							    	<option value="" selected >--구 선택--</option>
							    	<option value="all"selected >전체</option>
			    					<option value="{{gugun.gugun}}"  ng-repeat = "gugun in gugunList">{{gugun.gugun}}</option>
			    				</select>
			    			</td>	    			

			    			<td>
							    <select ng-model="select_school" ng-change="getSchoolGrade()">
							    	<option value=""selected>--학교 선택--</option>
							    	<option value="초등학교">초등학교</option>
							    	<option value="중학교">중학교</option>
							    	<option value="고등학교">고등학교</option>
			    					<option value="{{school.school_name}}"  ng-repeat = "school in schoolList">{{school.school_name}}</option>
			    				</select>
			    			</td>
			    			<td>
				    			<label>성별 </label>
			    			</td>
			    			<td>			    			
							    <select ng-model="select_sex">
							    	<option value="" selected >--성별--</option>
							    	<option value="all">전체</option>
			    					<option value="M">남</option>
			    					<option value="F">여</option>
			    				</select>
			    			</td>
			    			<td>
				    			<label >학년</label> <!-- 학교 선택 시, 초(1-6) 중,고(1-3) -->
			    			</td>
			    			<td>
							    <select ng-model="select_grade" ng-change="getSchoolClass()">
							    	<option value="" selected> --학년--</option>
							    	<option value="all"> 전 학년</option>
			    					<option value="{{grade.school_grade}}"  ng-repeat ="grade in gradeList">{{grade.school_grade}}학년</option>
	
			    				</select>
			    			</td>
			    			<td>
				    			<label>반 </label> <!-- 해당학교 학년의 반  -->
			    			</td>
			    			<td>
							    <select ng-model="select_class" >
							    	<option value="" selected>--반--</option>
			    					<option value="{{class.school_class}}"  ng-repeat ="class in classList">{{class.school_class}}반</option>
			    					
			    				</select>
			    			</td>
			    		</tr>
			    		<tr>
			    			<td>
			    				<label>정보 </label>
			    			</td>
			    			<td>
							    <select  ng-model="select_menu">
							    	<option value="" selected>--선 택--</option>
			    					<option value="HEIGHT">신장</option>
			    					<option value="WEIGHT">체중</option>
			    					<option value="BMI">체형</option>
			    					<option value="SMOKE">흡연</option>
			    				</select>
			    			</td>
			    			<td>
			    				<label>명단 및 통계 </label>
			    			</td>
			    			<td>
							    <select ng-model="stat">
							    	<option value="" selected>--선 택--</option>
							    	<option value="student" >명단</option>
							    	<option value="average">평균</option>
			    					<option value="ratio">비율</option>
			    					
			    				</select>
			    			</td>
			    			<td>
			    				<label>측정 월 </label>
			    			</td>
			    			<td>
			    				<input type="text"  placeholder="ex)201512" ng-model="measureDate" ng-enter="getResult()"/>
			    			</td>
			    			<td colspan="4">
								<button type="button" ng-click="getResult()" class="btn btn-info btn-block"></i>검색</button>
			    			</td>
			    		</tr>			    		
			    	</thead>

			    </table>

			</div>
			
			
	
			<div class="panel panel-info">
				<div class="panel-heading">
					<i class="fa fa-list fa-lg"></i> 결과 목록
				</div>
				<table class="table table-striped">

			    	<tbody>
					    <tr ng-repeat="r in results">
					    	<td>{{ r.measure_date}}</td>
					    	<td>{{ r.name}}</td>
						    <td>{{ r.school_name}}</td>
						    <td>{{ r.school_grade}}</td>
						    <td>{{ r.school_class}}</td>
						    <td>{{ r.sex}}</td>
						    <td>{{ r.val}}</td>
					    </tr>
				    </tbody>
			    </table>


				<div class="panel-footer" style="text-align:center; padding:0px;">	
					<pagination boundary-links="true" total-items="totalSchoolListCount" ng-model="currentPageSchool" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" ng-change="schoolPageChanged()"></pagination>
				</div>
				
			</div>
			
			
			
			
			
		</div>

</div>